(function (root, factory) {(typeof module === 'object' && module.exports) ? module.exports = factory() : root.MultiformatsUriToMultiaddr = factory()}(typeof self !== 'undefined' ? self : this, function () {
"use strict";var MultiformatsUriToMultiaddr=(()=>{var le=Object.defineProperty;var Kt=Object.getOwnPropertyDescriptor;var Zt=Object.getOwnPropertyNames;var er=Object.prototype.hasOwnProperty;var y=(e,t)=>{for(var r in t)le(e,r,{get:t[r],enumerable:!0})},tr=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Zt(t))!er.call(e,o)&&o!==r&&le(e,o,{get:()=>t[o],enumerable:!(n=Kt(t,o))||n.enumerable});return e};var rr=e=>tr(le({},"__esModule",{value:!0}),e);var Yn={};y(Yn,{default:()=>Yt});var oe=class extends Error{code;props;constructor(t,r,n){super(t),this.code=r,this.name=n?.name??"CodeError",this.props=n??{}}};var we={};y(we,{base58btc:()=>w,base58flickr:()=>ar});var eo=new Uint8Array(0);function st(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}function F(e){if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}function ct(e){return new TextEncoder().encode(e)}function at(e){return new TextDecoder().decode(e)}function nr(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var o=0;o<e.length;o++){var i=e.charAt(o),s=i.charCodeAt(0);if(r[s]!==255)throw new TypeError(i+" is ambiguous");r[s]=o}var c=e.length,d=e.charAt(0),m=Math.log(c)/Math.log(256),l=Math.log(256)/Math.log(c);function I(a){if(a instanceof Uint8Array||(ArrayBuffer.isView(a)?a=new Uint8Array(a.buffer,a.byteOffset,a.byteLength):Array.isArray(a)&&(a=Uint8Array.from(a))),!(a instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(a.length===0)return"";for(var g=0,V=0,A=0,P=a.length;A!==P&&a[A]===0;)A++,g++;for(var $=(P-A)*l+1>>>0,E=new Uint8Array($);A!==P;){for(var C=a[A],k=0,S=$-1;(C!==0||k<V)&&S!==-1;S--,k++)C+=256*E[S]>>>0,E[S]=C%c>>>0,C=C/c>>>0;if(C!==0)throw new Error("Non-zero carry");V=k,A++}for(var N=$-V;N!==$&&E[N]===0;)N++;for(var ne=d.repeat(g);N<$;++N)ne+=e.charAt(E[N]);return ne}function D(a){if(typeof a!="string")throw new TypeError("Expected String");if(a.length===0)return new Uint8Array;var g=0;if(a[g]!==" "){for(var V=0,A=0;a[g]===d;)V++,g++;for(var P=(a.length-g)*m+1>>>0,$=new Uint8Array(P);a[g];){var E=r[a.charCodeAt(g)];if(E===255)return;for(var C=0,k=P-1;(E!==0||C<A)&&k!==-1;k--,C++)E+=c*$[k]>>>0,$[k]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");A=C,g++}if(a[g]!==" "){for(var S=P-A;S!==P&&$[S]===0;)S++;for(var N=new Uint8Array(V+(P-S)),ne=V;S!==P;)N[ne++]=$[S++];return N}}}function v(a){var g=D(a);if(g)return g;throw new Error(`Non-${t} character`)}return{encode:I,decodeUnsafe:D,decode:v}}var or=nr,ir=or,dt=ir;var he=class{name;prefix;baseEncode;constructor(t,r,n){this.name=t,this.prefix=r,this.baseEncode=n}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}},me=class{name;prefix;baseDecode;prefixCodePoint;constructor(t,r,n){if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return ft(this,t)}},xe=class{decoders;constructor(t){this.decoders=t}or(t){return ft(this,t)}decode(t){let r=t[0],n=this.decoders[r];if(n!=null)return n.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};function ft(e,t){return new xe({...e.decoders??{[e.prefix]:e},...t.decoders??{[t.prefix]:t}})}var ge=class{name;prefix;baseEncode;baseDecode;encoder;decoder;constructor(t,r,n,o){this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=o,this.encoder=new he(t,r,n),this.decoder=new me(t,r,o)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}};function _({name:e,prefix:t,encode:r,decode:n}){return new ge(e,t,r,n)}function B({name:e,prefix:t,alphabet:r}){let{encode:n,decode:o}=dt(r,e);return _({prefix:t,name:e,encode:n,decode:i=>F(o(i))})}function sr(e,t,r,n){let o={};for(let l=0;l<t.length;++l)o[t[l]]=l;let i=e.length;for(;e[i-1]==="=";)--i;let s=new Uint8Array(i*r/8|0),c=0,d=0,m=0;for(let l=0;l<i;++l){let I=o[e[l]];if(I===void 0)throw new SyntaxError(`Non-${n} character`);d=d<<r|I,c+=r,c>=8&&(c-=8,s[m++]=255&d>>c)}if(c>=r||255&d<<8-c)throw new SyntaxError("Unexpected end of data");return s}function cr(e,t,r){let n=t[t.length-1]==="=",o=(1<<r)-1,i="",s=0,c=0;for(let d=0;d<e.length;++d)for(c=c<<8|e[d],s+=8;s>r;)s-=r,i+=t[o&c>>s];if(s!==0&&(i+=t[o&c<<r-s]),n)for(;i.length*r&7;)i+="=";return i}function p({name:e,prefix:t,bitsPerChar:r,alphabet:n}){return _({prefix:t,name:e,encode(o){return cr(o,n,r)},decode(o){return sr(o,n,r,e)}})}var w=B({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),ar=B({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var be={};y(be,{base32:()=>R,base32hex:()=>pr,base32hexpad:()=>hr,base32hexpadupper:()=>mr,base32hexupper:()=>lr,base32pad:()=>dr,base32padupper:()=>fr,base32upper:()=>ur,base32z:()=>xr});var R=p({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),ur=p({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),dr=p({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),fr=p({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),pr=p({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),lr=p({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),hr=p({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),mr=p({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),xr=p({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var gr=ht,pt=128,wr=127,br=~wr,yr=Math.pow(2,31);function ht(e,t,r){t=t||[],r=r||0;for(var n=r;e>=yr;)t[r++]=e&255|pt,e/=128;for(;e&br;)t[r++]=e&255|pt,e>>>=7;return t[r]=e|0,ht.bytes=r-n+1,t}var vr=ye,Er=128,lt=127;function ye(e,n){var r=0,n=n||0,o=0,i=n,s,c=e.length;do{if(i>=c)throw ye.bytes=0,new RangeError("Could not decode varint");s=e[i++],r+=o<28?(s&lt)<<o:(s&lt)*Math.pow(2,o),o+=7}while(s>=Er);return ye.bytes=i-n,r}var Ir=Math.pow(2,7),Ar=Math.pow(2,14),Sr=Math.pow(2,21),Tr=Math.pow(2,28),Pr=Math.pow(2,35),$r=Math.pow(2,42),Cr=Math.pow(2,49),Ur=Math.pow(2,56),Nr=Math.pow(2,63),Fr=function(e){return e<Ir?1:e<Ar?2:e<Sr?3:e<Tr?4:e<Pr?5:e<$r?6:e<Cr?7:e<Ur?8:e<Nr?9:10},Rr={encode:gr,decode:vr,encodingLength:Fr},Mr=Rr,Z=Mr;function ee(e,t=0){return[Z.decode(e,t),Z.decode.bytes]}function G(e,t,r=0){return Z.encode(e,t,r),t}function X(e){return Z.encodingLength(e)}function O(e,t){let r=t.byteLength,n=X(e),o=n+X(r),i=new Uint8Array(o+r);return G(e,i,0),G(r,i,n),i.set(t,o),new J(e,r,t,i)}function se(e){let t=F(e),[r,n]=ee(t),[o,i]=ee(t.subarray(n)),s=t.subarray(n+i);if(s.byteLength!==o)throw new Error("Incorrect length");return new J(r,o,s,t)}function mt(e,t){if(e===t)return!0;{let r=t;return e.code===r.code&&e.size===r.size&&r.bytes instanceof Uint8Array&&st(e.bytes,r.bytes)}}var J=class{code;size;digest;bytes;constructor(t,r,n,o){this.code=t,this.size=r,this.digest=n,this.bytes=o}};function xt(e,t){let{bytes:r,version:n}=e;switch(n){case 0:return kr(r,ve(e),t??w.encoder);default:return Br(r,ve(e),t??R.encoder)}}var gt=new WeakMap;function ve(e){let t=gt.get(e);if(t==null){let r=new Map;return gt.set(e,r),r}return t}var z=class e{code;version;multihash;bytes;"/";constructor(t,r,n,o){this.code=r,this.version=t,this.multihash=n,this.bytes=o,this["/"]=o}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:t,multihash:r}=this;if(t!==te)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==zr)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return e.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:t,digest:r}=this.multihash,n=O(t,r);return e.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(t){return e.equals(this,t)}static equals(t,r){let n=r;return n!=null&&t.code===n.code&&t.version===n.version&&mt(t.multihash,n.multihash)}toString(t){return xt(this,t)}toJSON(){return{"/":xt(this)}}link(){return this}[Symbol.toStringTag]="CID";[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(t){if(t==null)return null;let r=t;if(r instanceof e)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){let{version:n,code:o,multihash:i,bytes:s}=r;return new e(n,o,i,s??wt(n,o,i.bytes))}else if(r[Lr]===!0){let{version:n,multihash:o,code:i}=r,s=se(o);return e.create(n,i,s)}else return null}static create(t,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(t){case 0:{if(r!==te)throw new Error(`Version 0 CID must use dag-pb (code: ${te}) block encoding`);return new e(t,r,n,n.bytes)}case 1:{let o=wt(t,r,n.bytes);return new e(t,r,n,o)}default:throw new Error("Invalid version")}}static createV0(t){return e.create(0,te,t)}static createV1(t,r){return e.create(1,t,r)}static decode(t){let[r,n]=e.decodeFirst(t);if(n.length!==0)throw new Error("Incorrect length");return r}static decodeFirst(t){let r=e.inspectBytes(t),n=r.size-r.multihashSize,o=F(t.subarray(n,n+r.multihashSize));if(o.byteLength!==r.multihashSize)throw new Error("Incorrect length");let i=o.subarray(r.multihashSize-r.digestSize),s=new J(r.multihashCode,r.digestSize,i,o);return[r.version===0?e.createV0(s):e.createV1(r.codec,s),t.subarray(r.size)]}static inspectBytes(t){let r=0,n=()=>{let[I,D]=ee(t.subarray(r));return r+=D,I},o=n(),i=te;if(o===18?(o=0,r=0):i=n(),o!==0&&o!==1)throw new RangeError(`Invalid CID version ${o}`);let s=r,c=n(),d=n(),m=r+d,l=m-s;return{version:o,codec:i,multihashCode:c,digestSize:d,multihashSize:l,size:m}}static parse(t,r){let[n,o]=Dr(t,r),i=e.decode(o);if(i.version===0&&t[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return ve(i).set(n,t),i}};function Dr(e,t){switch(e[0]){case"Q":{let r=t??w;return[w.prefix,r.decode(`${w.prefix}${e}`)]}case w.prefix:{let r=t??w;return[w.prefix,r.decode(e)]}case R.prefix:{let r=t??R;return[R.prefix,r.decode(e)]}default:{if(t==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}}}function kr(e,t,r){let{prefix:n}=r;if(n!==w.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let o=t.get(n);if(o==null){let i=r.encode(e).slice(1);return t.set(n,i),i}else return o}function Br(e,t,r){let{prefix:n}=r,o=t.get(n);if(o==null){let i=r.encode(e);return t.set(n,i),i}else return o}var te=112,zr=18;function wt(e,t,r){let n=X(e),o=n+X(t),i=new Uint8Array(o+r.byteLength);return G(e,i,0),G(t,i,n),i.set(r,o),i}var Lr=Symbol.for("@ipld/js-cid/CID");function bt(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}var Ee={};y(Ee,{base10:()=>Vr});var Vr=B({prefix:"9",name:"base10",alphabet:"0123456789"});var Ie={};y(Ie,{base16:()=>Or,base16upper:()=>jr});var Or=p({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),jr=p({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Ae={};y(Ae,{base2:()=>qr});var qr=p({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Se={};y(Se,{base256emoji:()=>Hr});var yt=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),_r=yt.reduce((e,t,r)=>(e[r]=t,e),[]),Gr=yt.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]);function Xr(e){return e.reduce((t,r)=>(t+=_r[r],t),"")}function Jr(e){let t=[];for(let r of e){let n=Gr[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);t.push(n)}return new Uint8Array(t)}var Hr=_({prefix:"\u{1F680}",name:"base256emoji",encode:Xr,decode:Jr});var Te={};y(Te,{base36:()=>Wr,base36upper:()=>Qr});var Wr=B({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Qr=B({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Pe={};y(Pe,{base64:()=>Yr,base64pad:()=>Kr,base64url:()=>Zr,base64urlpad:()=>en});var Yr=p({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Kr=p({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Zr=p({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),en=p({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var $e={};y($e,{base8:()=>tn});var tn=p({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Ce={};y(Ce,{identity:()=>rn});var rn=_({prefix:"\0",name:"identity",encode:e=>at(e),decode:e=>ct(e)});var To=new TextEncoder,Po=new TextDecoder;var Ue={};y(Ue,{identity:()=>an});var vt=0,sn="identity",Et=F;function cn(e){return O(vt,Et(e))}var an={code:vt,name:sn,encode:Et,digest:cn};var Re={};y(Re,{sha256:()=>un,sha512:()=>dn});function Fe({name:e,code:t,encode:r}){return new Ne(e,t,r)}var Ne=class{name;code;encode;constructor(t,r,n){this.name=t,this.code=r,this.encode=n}digest(t){if(t instanceof Uint8Array){let r=this.encode(t);return r instanceof Uint8Array?O(this.code,r):r.then(n=>O(this.code,n))}else throw Error("Unknown type, must be binary type")}};function At(e){return async t=>new Uint8Array(await crypto.subtle.digest(e,t))}var un=Fe({name:"sha2-256",code:18,encode:At("SHA-256")}),dn=Fe({name:"sha2-512",code:19,encode:At("SHA-512")});var re={...Ce,...Ae,...$e,...Ee,...Ie,...be,...Te,...we,...Pe,...Se},Vo={...Re,...Ue};function j(e){return globalThis.Buffer!=null?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function W(e=0){return globalThis.Buffer?.allocUnsafe!=null?j(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function Tt(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}var St=Tt("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),Me=Tt("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{e=e.substring(1);let t=W(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),fn={utf8:St,"utf-8":St,hex:re.base16,latin1:Me,ascii:Me,binary:Me,...re},ce=fn;function b(e,t="utf8"){let r=ce[t];if(r==null)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):r.encoder.encode(e).substring(1)}var pn=Math.pow(2,7),ln=Math.pow(2,14),hn=Math.pow(2,21),De=Math.pow(2,28),ke=Math.pow(2,35),Be=Math.pow(2,42),ze=Math.pow(2,49),u=128,x=127;function U(e){if(e<pn)return 1;if(e<ln)return 2;if(e<hn)return 3;if(e<De)return 4;if(e<ke)return 5;if(e<Be)return 6;if(e<ze)return 7;if(Number.MAX_SAFE_INTEGER!=null&&e>Number.MAX_SAFE_INTEGER)throw new RangeError("Could not encode varint");return 8}function mn(e,t,r=0){switch(U(e)){case 8:t[r++]=e&255|u,e/=128;case 7:t[r++]=e&255|u,e/=128;case 6:t[r++]=e&255|u,e/=128;case 5:t[r++]=e&255|u,e/=128;case 4:t[r++]=e&255|u,e>>>=7;case 3:t[r++]=e&255|u,e>>>=7;case 2:t[r++]=e&255|u,e>>>=7;case 1:{t[r++]=e&255,e>>>=7;break}default:throw new Error("unreachable")}return t}function xn(e,t,r=0){switch(U(e)){case 8:t.set(r++,e&255|u),e/=128;case 7:t.set(r++,e&255|u),e/=128;case 6:t.set(r++,e&255|u),e/=128;case 5:t.set(r++,e&255|u),e/=128;case 4:t.set(r++,e&255|u),e>>>=7;case 3:t.set(r++,e&255|u),e>>>=7;case 2:t.set(r++,e&255|u),e>>>=7;case 1:{t.set(r++,e&255),e>>>=7;break}default:throw new Error("unreachable")}return t}function gn(e,t){let r=e[t],n=0;if(n+=r&x,r<u||(r=e[t+1],n+=(r&x)<<7,r<u)||(r=e[t+2],n+=(r&x)<<14,r<u)||(r=e[t+3],n+=(r&x)<<21,r<u)||(r=e[t+4],n+=(r&x)*De,r<u)||(r=e[t+5],n+=(r&x)*ke,r<u)||(r=e[t+6],n+=(r&x)*Be,r<u)||(r=e[t+7],n+=(r&x)*ze,r<u))return n;throw new RangeError("Could not decode varint")}function wn(e,t){let r=e.get(t),n=0;if(n+=r&x,r<u||(r=e.get(t+1),n+=(r&x)<<7,r<u)||(r=e.get(t+2),n+=(r&x)<<14,r<u)||(r=e.get(t+3),n+=(r&x)<<21,r<u)||(r=e.get(t+4),n+=(r&x)*De,r<u)||(r=e.get(t+5),n+=(r&x)*ke,r<u)||(r=e.get(t+6),n+=(r&x)*Be,r<u)||(r=e.get(t+7),n+=(r&x)*ze,r<u))return n;throw new RangeError("Could not decode varint")}function Q(e,t,r=0){return t==null&&(t=W(U(e))),t instanceof Uint8Array?mn(e,t,r):xn(e,t,r)}function q(e,t=0){return e instanceof Uint8Array?gn(e,t):wn(e,t)}function M(e,t){if(globalThis.Buffer!=null)return j(globalThis.Buffer.concat(e,t));t==null&&(t=e.reduce((o,i)=>o+i.length,0));let r=W(t),n=0;for(let o of e)r.set(o,n),n+=o.length;return j(r)}var ae=class{index=0;input="";new(t){return this.index=0,this.input=t,this}readAtomically(t){let r=this.index,n=t();return n===void 0&&(this.index=r),n}parseWith(t){let r=t();if(this.index===this.input.length)return r}peekChar(){if(!(this.index>=this.input.length))return this.input[this.index]}readChar(){if(!(this.index>=this.input.length))return this.input[this.index++]}readGivenChar(t){return this.readAtomically(()=>{let r=this.readChar();if(r===t)return r})}readSeparator(t,r,n){return this.readAtomically(()=>{if(!(r>0&&this.readGivenChar(t)===void 0))return n()})}readNumber(t,r,n,o){return this.readAtomically(()=>{let i=0,s=0,c=this.peekChar();if(c===void 0)return;let d=c==="0",m=2**(8*o)-1;for(;;){let l=this.readAtomically(()=>{let I=this.readChar();if(I===void 0)return;let D=Number.parseInt(I,t);if(!Number.isNaN(D))return D});if(l===void 0)break;if(i*=t,i+=l,i>m||(s+=1,r!==void 0&&s>r))return}if(s!==0)return!n&&d&&s>1?void 0:i})}readIPv4Addr(){return this.readAtomically(()=>{let t=new Uint8Array(4);for(let r=0;r<t.length;r++){let n=this.readSeparator(".",r,()=>this.readNumber(10,3,!1,1));if(n===void 0)return;t[r]=n}return t})}readIPv6Addr(){let t=r=>{for(let n=0;n<r.length/2;n++){let o=n*2;if(n<r.length-3){let s=this.readSeparator(":",n,()=>this.readIPv4Addr());if(s!==void 0)return r[o]=s[0],r[o+1]=s[1],r[o+2]=s[2],r[o+3]=s[3],[o+4,!0]}let i=this.readSeparator(":",n,()=>this.readNumber(16,4,!0,2));if(i===void 0)return[o,!1];r[o]=i>>8,r[o+1]=i&255}return[r.length,!1]};return this.readAtomically(()=>{let r=new Uint8Array(16),[n,o]=t(r);if(n===16)return r;if(o||this.readGivenChar(":")===void 0||this.readGivenChar(":")===void 0)return;let i=new Uint8Array(14),s=16-(n+2),[c]=t(i.subarray(0,s));return r.set(i.subarray(0,c),16-c),r})}readIPAddr(){return this.readIPv4Addr()??this.readIPv6Addr()}};var $t=45,bn=15,Y=new ae;function Le(e){if(!(e.length>bn))return Y.new(e).parseWith(()=>Y.readIPv4Addr())}function Ve(e){if(e.includes("%")&&(e=e.split("%")[0]),!(e.length>$t))return Y.new(e).parseWith(()=>Y.readIPv6Addr())}function ue(e){if(e.includes("%")&&(e=e.split("%")[0]),!(e.length>$t))return Y.new(e).parseWith(()=>Y.readIPAddr())}var ui=parseInt("0xFFFF",16),di=new Uint8Array([0,0,0,0,0,0,0,0,0,0,255,255]);function Oe(e,t="utf8"){let r=ce[t];if(r==null)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?j(globalThis.Buffer.from(e,"utf-8")):r.decoder.decode(`${r.prefix}${e}`)}function Nt(e){return!!Le(e)}function Ft(e){return!!Ve(e)}function de(e){return!!ue(e)}var Rt=Nt,An=Ft,je=function(e){let t=0;if(e=e.toString().trim(),Rt(e)){let r=new Uint8Array(t+4);return e.split(/\./g).forEach(n=>{r[t++]=parseInt(n,10)&255}),r}if(An(e)){let r=e.split(":",8),n;for(n=0;n<r.length;n++){let i=Rt(r[n]),s;i&&(s=je(r[n]),r[n]=b(s.slice(0,2),"base16")),s!=null&&++n<8&&r.splice(n,0,b(s.slice(2,4),"base16"))}if(r[0]==="")for(;r.length<8;)r.unshift("0");else if(r[r.length-1]==="")for(;r.length<8;)r.push("0");else if(r.length<8){for(n=0;n<r.length&&r[n]!=="";n++);let i=[n,1];for(n=9-r.length;n>0;n--)i.push("0");r.splice.apply(r,i)}let o=new Uint8Array(t+16);for(n=0;n<r.length;n++){let i=parseInt(r[n],16);o[t++]=i>>8&255,o[t++]=i&255}return o}throw new Error("invalid ip address")},Mt=function(e,t=0,r){t=~~t,r=r??e.length-t;let n=new DataView(e.buffer);if(r===4){let o=[];for(let i=0;i<r;i++)o.push(e[t+i]);return o.join(".")}if(r===16){let o=[];for(let i=0;i<r;i+=2)o.push(n.getUint16(t+i).toString(16));return o.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""};var K={},qe={},Tn=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,-1,"ip6zone"],[43,8,"ipcidr"],[53,-1,"dns",!0],[54,-1,"dns4",!0],[55,-1,"dns6",!0],[56,-1,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc-direct"],[281,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,-1,"unix",!1,!0],[421,-1,"ipfs"],[421,-1,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,-1,"garlic64"],[448,0,"tls"],[449,-1,"sni"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,-1,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,-1,"memory"]];Tn.forEach(e=>{let t=Pn(...e);qe[t.code]=t,K[t.name]=t});function Pn(e,t,r,n,o){return{code:e,size:t,name:r,resolvable:!!n,path:!!o}}function f(e){if(typeof e=="number"){if(qe[e]!=null)return qe[e];throw new Error(`no protocol with code: ${e}`)}else if(typeof e=="string"){if(K[e]!=null)return K[e];throw new Error(`no protocol with name: ${e}`)}throw new Error(`invalid protocol id type: ${typeof e}`)}var Qi=f("ip4"),Yi=f("ip6"),Ki=f("ipcidr");function Ge(e,t){switch(f(e).code){case 4:case 41:return Cn(t);case 42:return Bt(t);case 6:case 273:case 33:case 132:return Lt(t).toString();case 53:case 54:case 55:case 56:case 400:case 449:case 777:return Bt(t);case 421:return Rn(t);case 444:return zt(t);case 445:return zt(t);case 466:return Fn(t);default:return b(t,"base16")}}function Xe(e,t){switch(f(e).code){case 4:return Dt(t);case 41:return Dt(t);case 42:return kt(t);case 6:case 273:case 33:case 132:return Je(parseInt(t,10));case 53:case 54:case 55:case 56:case 400:case 449:case 777:return kt(t);case 421:return Un(t);case 444:return Mn(t);case 445:return Dn(t);case 466:return Nn(t);default:return Oe(t,"base16")}}var _e=Object.values(re).map(e=>e.decoder),$n=function(){let e=_e[0].or(_e[1]);return _e.slice(2).forEach(t=>e=e.or(t)),e}();function Dt(e){if(!de(e))throw new Error("invalid ip address");return je(e)}function Cn(e){let t=Mt(e,0,e.length);if(t==null)throw new Error("ipBuff is required");if(!de(t))throw new Error("invalid ip address");return t}function Je(e){let t=new ArrayBuffer(2);return new DataView(t).setUint16(0,e),new Uint8Array(t)}function Lt(e){return new DataView(e.buffer).getUint16(e.byteOffset)}function kt(e){let t=Oe(e),r=Uint8Array.from(Q(t.length));return M([r,t],r.length+t.length)}function Bt(e){let t=q(e);if(e=e.slice(U(t)),e.length!==t)throw new Error("inconsistent lengths");return b(e)}function Un(e){let t;e[0]==="Q"||e[0]==="1"?t=se(w.decode(`z${e}`)).bytes:t=z.parse(e).multihash.bytes;let r=Uint8Array.from(Q(t.length));return M([r,t],r.length+t.length)}function Nn(e){let t=$n.decode(e),r=Uint8Array.from(Q(t.length));return M([r,t],r.length+t.length)}function Fn(e){let t=q(e),r=e.slice(U(t));if(r.length!==t)throw new Error("inconsistent lengths");return"u"+b(r,"base64url")}function Rn(e){let t=q(e),r=e.slice(U(t));if(r.length!==t)throw new Error("inconsistent lengths");return b(r,"base58btc")}function Mn(e){let t=e.split(":");if(t.length!==2)throw new Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(t[0].length!==16)throw new Error(`failed to parse onion addr: ${t[0]} not a Tor onion address.`);let r=R.decode("b"+t[0]),n=parseInt(t[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let o=Je(n);return M([r,o],r.length+o.length)}function Dn(e){let t=e.split(":");if(t.length!==2)throw new Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(t[0].length!==56)throw new Error(`failed to parse onion addr: ${t[0]} not a Tor onion3 address.`);let r=R.decode(`b${t[0]}`),n=parseInt(t[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let o=Je(n);return M([r,o],r.length+o.length)}function zt(e){let t=e.slice(0,e.length-2),r=e.slice(e.length-2),n=b(t,"base32"),o=Lt(r);return`${n}:${o}`}function Vt(e){e=He(e);let t=[],r=[],n=null,o=e.split("/").slice(1);if(o.length===1&&o[0]==="")return{bytes:new Uint8Array,string:"/",tuples:[],stringTuples:[],path:null};for(let i=0;i<o.length;i++){let s=o[i],c=f(s);if(c.size===0){t.push([c.code]),r.push([c.code]);continue}if(i++,i>=o.length)throw jt("invalid address: "+e);if(c.path===!0){n=He(o.slice(i).join("/")),t.push([c.code,Xe(c.code,n)]),r.push([c.code,n]);break}let d=Xe(c.code,o[i]);t.push([c.code,d]),r.push([c.code,Ge(c.code,d)])}return{string:Ot(r),bytes:Qe(t),tuples:t,stringTuples:r,path:n}}function We(e){let t=[],r=[],n=null,o=0;for(;o<e.length;){let i=q(e,o),s=U(i),c=f(i),d=kn(c,e.slice(o+s));if(d===0){t.push([i]),r.push([i]),o+=s;continue}let m=e.slice(o+s,o+s+d);if(o+=d+s,o>e.length)throw jt("Invalid address Uint8Array: "+b(e,"base16"));t.push([i,m]);let l=Ge(i,m);if(r.push([i,l]),c.path===!0){n=l;break}}return{bytes:Uint8Array.from(e),string:Ot(r),tuples:t,stringTuples:r,path:n}}function Ot(e){let t=[];return e.map(r=>{let n=f(r[0]);return t.push(n.name),r.length>1&&r[1]!=null&&t.push(r[1]),null}),He(t.join("/"))}function Qe(e){return M(e.map(t=>{let r=f(t[0]),n=Uint8Array.from(Q(r.code));return t.length>1&&t[1]!=null&&(n=M([n,t[1]])),n}))}function kn(e,t){if(e.size>0)return e.size/8;if(e.size===0)return 0;{let r=q(t instanceof Uint8Array?t:Uint8Array.from(t));return r+U(r)}}function He(e){return"/"+e.trim().split("/").filter(t=>t).join("/")}function jt(e){return new Error("Error parsing address: "+e)}var Bn=Symbol.for("nodejs.util.inspect.custom"),Ye=Symbol.for("@multiformats/js-multiaddr/multiaddr"),zn=[f("dns").code,f("dns4").code,f("dns6").code,f("dnsaddr").code],fe=class e{bytes;#t;#e;#r;#n;[Ye]=!0;constructor(t){t==null&&(t="");let r;if(t instanceof Uint8Array)r=We(t);else if(typeof t=="string"){if(t.length>0&&t.charAt(0)!=="/")throw new Error(`multiaddr "${t}" must start with a "/"`);r=Vt(t)}else if(_t(t))r=We(t.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr");this.bytes=r.bytes,this.#t=r.string,this.#e=r.tuples,this.#r=r.stringTuples,this.#n=r.path}toString(){return this.#t}toJSON(){return this.toString()}toOptions(){let t,r,n,o,i="",s=f("tcp"),c=f("udp"),d=f("ip4"),m=f("ip6"),l=f("dns6"),I=f("ip6zone");for(let[v,a]of this.stringTuples())v===I.code&&(i=`%${a??""}`),zn.includes(v)&&(r=s.name,o=443,n=`${a??""}${i}`,t=v===l.code?6:4),(v===s.code||v===c.code)&&(r=f(v).name,o=parseInt(a??"")),(v===d.code||v===m.code)&&(r=f(v).name,n=`${a??""}${i}`,t=v===m.code?6:4);if(t==null||r==null||n==null||o==null)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:t,host:n,transport:r,port:o}}protos(){return this.#e.map(([t])=>Object.assign({},f(t)))}protoCodes(){return this.#e.map(([t])=>t)}protoNames(){return this.#e.map(([t])=>f(t).name)}tuples(){return this.#e}stringTuples(){return this.#r}encapsulate(t){return t=new e(t),new e(this.toString()+t.toString())}decapsulate(t){let r=t.toString(),n=this.toString(),o=n.lastIndexOf(r);if(o<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${t.toString()}`);return new e(n.slice(0,o))}decapsulateCode(t){let r=this.tuples();for(let n=r.length-1;n>=0;n--)if(r[n][0]===t)return new e(Qe(r.slice(0,n)));return this}getPeerId(){try{let t=[];this.stringTuples().forEach(([n,o])=>{n===K.p2p.code&&t.push([n,o]),n===K["p2p-circuit"].code&&(t=[])});let r=t.pop();if(r?.[1]!=null){let n=r[1];return n[0]==="Q"||n[0]==="1"?b(w.decode(`z${n}`),"base58btc"):b(z.parse(n).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){return this.#n}equals(t){return bt(this.bytes,t.bytes)}async resolve(t){let r=this.protos().find(i=>i.resolvable);if(r==null)return[this];let n=qt.get(r.name);if(n==null)throw new oe(`no available resolver for ${r.name}`,"ERR_NO_AVAILABLE_RESOLVER");return(await n(this,t)).map(i=>new e(i))}nodeAddress(){let t=this.toOptions();if(t.transport!=="tcp"&&t.transport!=="udp")throw new Error(`multiaddr must have a valid format - no protocol with name: "${t.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:t.family,address:t.host,port:t.port}}isThinWaistAddress(t){let r=(t??this).protos();return!(r.length!==2||r[0].code!==4&&r[0].code!==41||r[1].code!==6&&r[1].code!==273)}[Bn](){return`Multiaddr(${this.#t})`}};var qt=new Map;function _t(e){return!!e?.[Ye]}function Ke(e){return new fe(e)}var Gt="[a-fA-F\\d:]",L=e=>e&&e.includeBoundaries?`(?:(?<=\\s|^)(?=${Gt})|(?<=${Gt})(?=\\s|$))`:"",T="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",h="[a-fA-F\\d]{1,4}",pe=`
(?:
(?:${h}:){7}(?:${h}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${h}:){6}(?:${T}|:${h}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${h}:){5}(?::${T}|(?::${h}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${h}:){4}(?:(?::${h}){0,1}:${T}|(?::${h}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${h}:){3}(?:(?::${h}){0,2}:${T}|(?::${h}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${h}:){2}(?:(?::${h}){0,3}:${T}|(?::${h}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${h}:){1}(?:(?::${h}){0,4}:${T}|(?::${h}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::${h}){0,5}:${T}|(?::${h}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),Ln=new RegExp(`(?:^${T}$)|(?:^${pe}$)`),Vn=new RegExp(`^${T}$`),On=new RegExp(`^${pe}$`),Ze=e=>e&&e.exact?Ln:new RegExp(`(?:${L(e)}${T}${L(e)})|(?:${L(e)}${pe}${L(e)})`,"g");Ze.v4=e=>e&&e.exact?Vn:new RegExp(`${L(e)}${T}${L(e)}`,"g");Ze.v6=e=>e&&e.exact?On:new RegExp(`${L(e)}${pe}${L(e)}`,"g");var et=Ze;function tt(e){let t=(...r)=>e(...r);return Object.defineProperty(t,"name",{value:`functionTimeout(${e.name||"<anonymous>"})`,configurable:!0}),t}function Xt(){return!1}var{toString:jn}=Object.prototype;function rt(e){return jn.call(e)==="[object RegExp]"}var Jt={global:"g",ignoreCase:"i",multiline:"m",dotAll:"s",sticky:"y",unicode:"u"};function nt(e,t={}){if(!rt(e))throw new TypeError("Expected a RegExp instance");let r=Object.keys(Jt).map(o=>(typeof t[o]=="boolean"?t[o]:e[o])?Jt[o]:"").join(""),n=new RegExp(t.source||e.source,r);return n.lastIndex=typeof t.lastIndex=="number"?t.lastIndex:e.lastIndex,n}function ot(e,t,{timeout:r}={}){try{return tt(()=>nt(e).test(t),{timeout:r})()}catch(n){if(Xt(n))return!1;throw n}}var qn=15,_n=45,Ht={timeout:400};function it(e){return e.length>_n?!1:ot(et.v6({exact:!0}),e,Ht)}function Wt(e){return e.length>qn?!1:ot(et.v4({exact:!0}),e,Ht)}var Qt={http:"80",https:"443",ws:"80",wss:"443"},Gn=["http","https","ws","wss"];function Yt(e,t){t=t??{};let r=t.defaultDnsType??"dns4",{scheme:n,hostname:o,port:i}=Xn(e),c="/"+[Jn(o,r),Hn(i,n),Wn(n)].filter(d=>!!d).reduce((d,m)=>d.concat(m),[]).join("/");return Ke(c)}function Xn(e){let[t]=e.split(":");Gn.includes(t)||(e="http"+e.substring(t.length));let{protocol:r,hostname:n,port:o}=new URL(e);if(o==null||o===""){let i=Qn(t);i!=null&&(o=i),i==null&&r==="http:"&&(o="80")}return{scheme:t,hostname:n,port:o}}function Jn(e,t){if(!(e==null||e==="")){if(Wt(e))return["ip4",e];if(it(e))return["ip6",e];if(e[0]==="["){let r=e.substring(1,e.length-1);if(it(r))return["ip6",r]}return[t,e]}}function Hn(e,t){if(!(e==null||e===""))return t==="udp"?["udp",e]:["tcp",e]}function Wn(e){if(e.match(/^tcp$|^udp$/)==null)return[e]}function Qn(e){if(!(e==null||e===""||Qt[e]==null))return Qt[e]}return rr(Yn);})();
return MultiformatsUriToMultiaddr}));

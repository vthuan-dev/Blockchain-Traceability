(function (root, factory) {(typeof module === 'object' && module.exports) ? module.exports = factory() : root.RaceSignal = factory()}(typeof self !== 'undefined' ? self : this, function () {
"use strict";var RaceSignal=(()=>{var i=Object.defineProperty;var c=Object.getOwnPropertyDescriptor;var d=Object.getOwnPropertyNames;var l=Object.prototype.hasOwnProperty;var u=(t,e)=>{for(var r in e)i(t,r,{get:e[r],enumerable:!0})},m=(t,e,r,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of d(e))!l.call(t,n)&&n!==r&&i(t,n,{get:()=>e[n],enumerable:!(o=c(e,n))||o.enumerable});return t};var b=t=>m(i({},"__esModule",{value:!0}),t);var w={};u(w,{AbortError:()=>a,raceSignal:()=>f});var a=class extends Error{type;code;constructor(e,r,o){super(e??"The operation was aborted"),this.type="aborted",this.name=o??"AbortError",this.code=r??"ABORT_ERR"}};async function f(t,e,r){if(e==null)return t;if(e.aborted)return Promise.reject(new a(r?.errorMessage,r?.errorCode,r?.errorName));let o,n=new a(r?.errorMessage,r?.errorCode,r?.errorName);try{return await Promise.race([t,new Promise((y,s)=>{o=()=>{s(n)},e.addEventListener("abort",o)})])}finally{o!=null&&e.removeEventListener("abort",o)}}return b(w);})();
return RaceSignal}));
